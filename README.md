# Система учета материалов

Полнофункциональное приложение для управления учетом материалов, разработанное с использованием Flask, SQLAlchemy, GraphQL, React, TypeScript и Relay.

## Функциональность

- Создание и управление клиентами с процентами наценки
- Создание и управление поставщиками
- Создание накладных на материалы
- Автоматическое создание транзакций с наценкой на основе договора клиента
- Автоматическое создание долгов как для клиентов, так и для поставщиков
- Отслеживание долгов клиентов и поставщиков

## Структура проекта

Проект разделен на две основные части:

### Бэкенд

- Flask с SQLAlchemy для работы с базой данных
- GraphQL API с использованием Graphene
- Модели для клиентов, поставщиков, накладных, транзакций и долгов

### Фронтенд

- React с TypeScript
- Relay для GraphQL клиента
- Material-UI и Tailwind CSS для стилизации
- React Hook Form для работы с формами

## Установка и запуск

### Бэкенд

1. Перейдите в директорию бэкенда:
```bash
cd backend
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Настройте переменные окружения:
Создайте файл `.env` в директории backend со следующим содержимым:
```
FLASK_APP=app
FLASK_ENV=development
DATABASE_URI=sqlite:///materials.db
```

5. Инициализируйте базу данных:
```bash
flask db init
flask db migrate -m "Initial migration"
flask db upgrade
```

6. Запустите приложение:
```bash
flask run
```

GraphQL API будет доступен по адресу http://localhost:5000/graphql

### Фронтенд

1. Перейдите в директорию фронтенда:
```bash
cd frontend
```

2. Установите зависимости:
```bash
npm install
```

3. Получите схему GraphQL с бэкенда:
```bash
npm run fetch-schema
```

4. Сгенерируйте файлы Relay:
```bash
npm run relay
```

5. Запустите сервер разработки:
```bash
npm start
```

Приложение будет доступно по адресу http://localhost:3000

## Использование

1. Сначала создайте клиентов с их процентами наценки
2. Создайте поставщиков
3. Создайте накладные на материалы, выбрав клиента и поставщика
4. Просмотрите автоматически созданные транзакции и долги

## Основные возможности

### Управление клиентами
- Создание клиентов с указанием процента наценки
- Просмотр списка клиентов

### Управление поставщиками
- Создание поставщиков
- Просмотр списка поставщиков

### Создание накладных
- Создание накладных с несколькими позициями материалов
- Выбор клиента и поставщика
- Расчет общей суммы и наценки на основе процента клиента
- Автоматическое создание транзакции с наценкой
- Автоматическое создание долгов для клиента и поставщика

### Отслеживание долгов
- Просмотр долгов клиентов
- Просмотр долгов поставщиков

## Используемые технологии

- **Бэкенд**:
  - Flask
  - SQLAlchemy
  - GraphQL (Graphene)
  - Python

- **Фронтенд**:
  - React
  - TypeScript
  - Relay (GraphQL клиент)
  - Material-UI
  - Tailwind CSS
  - React Hook Form
